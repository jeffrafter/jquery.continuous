(function(b){var c={loadingIndicator:null,url:window.location.toString(),distance:270,area:window};var a=function(A,h){var g={};b.extend(g,c,h);var r=this;var q=b(A);var i=g.distance;var y=g.area;var C=function(){if(y===window){return b(document).height()-b(window).scrollTop()-b(window).height()}else{return b(y)[0].scrollHeight-b(y).scrollTop()-b(y).height()}};var w=function(){return parseInt(q.attr("data-current-page"))};var B=function(){return parseInt(q.attr("data-total-pages"))};var u=function(){return w()==(B())};var v=function(){return w()+1};var p=function(D){q.attr("data-current-page",D)};var j=function(){return C()<=i};var l=function(){if(q.is(".continuous-loading")){return}if(u()){s();return}if(j()){this.load()}};var t=function(){l.apply(r)};var s=function(){b(y).unbind("scroll resize",t)};var o=function(){b(y).bind("scroll resize",t)};o();var e=function(){if(g.loadingIndicator){b(g.loadingIndicator).show()}};var d=function(){if(g.loadingIndicator){b(g.loadingIndicator).hide()}};var k=function(){if(g.errorIndicator){b(g.errorIndicator).show()}};var z=function(){if(g.errorIndicator){b(g.errorIndicator).hide()}};var n=function(){if(g.afterLoad){g.afterLoad.apply(this)}};var x=function(D){D=b(D);if(g.newContent){g.newContent.apply(this,[D])}return D};var f=function(D){p(v());z();d();D=x(D);q.removeClass("continuous-loading").append(D);n()};var m=function(D){d();D=x(D);q.removeClass("continuous-loading").append(D);k()};this.load=function(){q.addClass("continuous-loading");e();b.ajax({url:g.url,data:{page:v()},success:f,error:m})};t()};b.fn.continuous=function(d){b.each(this,function(f,g){if(d=="load"||d=="retry"){g.continuous.load()}else{g.continuous=new a(g,d)}});return this}}(jQuery));